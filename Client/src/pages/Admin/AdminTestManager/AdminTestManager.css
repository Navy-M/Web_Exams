:root{
  --bg: var(--background-light, #ffffff);
  --bg-elev:#f8fafc;
  --text: var(--text-light, #0f172a);
  --muted:#64748b;
  --border: var(--border-light, #e2e8f0);
  --primary: var(--primary-color, #2563eb);
  --secondary: var(--secondary-color, #4f46e5);
  --danger:#ef4444;
  --ring: rgba(37,99,235,.28);
  --shadow: 0 6px 20px rgba(2,6,23,.06);
  --r: 14px;
  --r-sm: 10px;
}
[data-theme="dark"]{
  --bg: var(--background-dark, #0b0f19);
  --bg-elev:#0f172a;
  --text: var(--text-dark, #e5e7eb);
  --muted:#94a3b8;
  --border: var(--border-dark, #1f2937);
  --shadow: 0 10px 28px rgba(0,0,0,.35);
}

/* base */
.atm-root{ color: var(--text); display:flex; flex-direction:column; gap:.9rem; }
.muted{ color: var(--muted); }
.card{ background: var(--bg-elev); border:1px solid var(--border); border-radius: var(--r); box-shadow: var(--shadow); }

/* header */
.atm-head{ display:flex; align-items:center; justify-content: space-between; gap:.75rem; }
.atm-title{ margin:0; color: var(--primary); font-size:1.35rem; font-weight:800; }

.btn{ display:inline-flex; align-items:center; gap:.5rem; padding:.5rem .85rem; border-radius:10px; border:1px solid var(--border);
  background: var(--bg); color: var(--text); cursor:pointer; transition: transform .15s, box-shadow .15s; }
.btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 24px rgba(2,6,23,.1); }
.btn.primary{ background: linear-gradient(135deg, var(--primary), var(--secondary)); color:#fff; border-color: transparent; }
.btn.outline{ background: transparent; border-color: var(--primary); color: var(--primary); }
.btn.ghost{ background: transparent; }
.btn.danger{ background: rgba(239,68,68,.15); color:#fff; border-color: rgba(239,68,68,.3); }
.btn.tiny{ padding:.25rem .5rem; font-size:.85rem; }

/* stats */
.atm-stats{ display:grid; grid-template-columns: 1fr 1.5fr 1.5fr; gap:.6rem; padding: .75rem; }
.stat{ background: var(--bg); border:1px solid var(--border); border-radius:12px; padding:.65rem .8rem; }
.stat-label{ font-size:.9rem; color: var(--muted); margin-bottom:.25rem; }
.stat-value{ font-size:1.25rem; font-weight:800; }
.chips{ display:flex; gap:.4rem; flex-wrap: wrap; }
.chip{ border:1px solid var(--border); border-radius:999px; padding:.15rem .5rem; font-size:.85rem; background: var(--bg); color: var(--muted); }

/* controls */
.atm-controls{ display:flex; align-items:center; justify-content: space-between; gap:.6rem; flex-wrap: wrap; }
.search-wrap input{
  min-width:280px; border:1px solid var(--border); background: var(--bg); color: var(--text);
  padding:.5rem .7rem; border-radius:10px;
}
.filters{ display:flex; gap:.5rem; flex-wrap: wrap; }
.filters select{
  border:1px solid var(--border); background: var(--bg); color: var(--text);
  padding:.5rem .6rem; border-radius:10px;
}
.toggle{ display:inline-flex; align-items:center; gap:.4rem; -webkit-user-select:none; user-select:none; }

/* table */
.atm-list{ padding:.75rem; }
.table-wrap{ overflow:auto; border-radius: 12px; border:1px solid var(--border); background: var(--bg); }
.tests-table{ width:100%; border-collapse: collapse; min-width: 820px; }
.tests-table th, .tests-table td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:right; }
.tests-table thead th{ background: rgba(37,99,235,.08); font-weight:800; }
.center{ text-align:center; }
.actions{ display:flex; gap:.4rem; flex-wrap: wrap; }

/* groups */
.groups{ display:flex; flex-direction:column; gap:.8rem; }
.group{ border:1px solid var(--border); border-radius:12px; background: var(--bg); }
.group-head{ display:flex; align-items:center; justify-content: space-between; padding:.6rem .8rem; border-bottom:1px solid var(--border); }
.group-title{ margin:0; }

/* drawer */
.drawer-overlay{
  position: fixed; inset:0; background: rgba(0,0,0,.35);
  display:flex; align-items:stretch; justify-content:flex-start; z-index:1000;
}
.drawer{
  width:min(520px, 92vw); height:100vh; padding: .85rem;
  border-radius:0; border-inline-end: 1px solid var(--border); background: var(--bg-elev);
}
.drawer-head{ display:flex; align-items:center; justify-content: space-between; border-bottom:1px solid var(--border); padding-bottom:.5rem; margin-bottom:.6rem; }
.drawer-body{ display:grid; gap:.5rem; }
.kv{ display:flex; gap:.35rem; align-items:center; }
.label{ color: var(--muted); min-width:90px; }
.value{ color: var(--text); display:flex; gap:.35rem; flex-wrap: wrap; }
.desc h4{ margin:.4rem 0 .25rem 0; }
.drawer-foot{ display:flex; gap:.5rem; justify-content:flex-end; margin-top:.75rem; border-top:1px solid var(--border); padding-top:.6rem; }

/* jobs */
.job-req{ padding: .85rem; }
.job-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:.6rem; }
.job-card{ background: var(--bg); border:1px solid var(--border); border-radius:12px; padding:.6rem .75rem; }
.job-head h4{ margin:.25rem 0 .5rem 0; }
.job-list{ margin:0; padding-inline-start: 18px; }

/* footer */
.atm-footer{ margin-top:.75rem; }

/* responsive */
@media (max-width: 1024px){
  .atm-stats{ grid-template-columns: 1fr; }
}
